{% extends "base.html" %}

{% block title %}Номер {{ room.title }}{% endblock %}

{% block content %}
    <nav aria-label="breadcrumb">
        <ol>
            <li><a href="{% url 'hotel_numbers:hotel_list' %}">Отели</a></li>
            <li><a href="{% url 'hotel_numbers:hotel_detail' room.hotel.slug %}">{{ room.hotel.title }}</a></li>
            <li><a href="{% url 'hotel_numbers:room_list' room.hotel.slug room.category %}">Категория: {{ room.get_category_display }}</a></li>
            <li style="color: #555;">{{ room.title }}</li>
        </ol>
    </nav>

    <h1>{{ room.title }}</h1>
    <h2>в отеле "{{ room.hotel.title }}"</h2>

    <div>
        <p><strong>Цена за ночь:</strong> {{ room.price }} руб.</p>
        <p><strong>Количество спальных мест:</strong> {{ room.sleep_places }}</p>
        <p><strong>Этаж:</strong> {{ room.floor }}</p>

        {% if current_booking %}
            {# --- НАЧАЛО ЕДИНСТВЕННОГО ПРАВИЛЬНОГО БЛОКА --- #}
            <p><strong>Статус:</strong> <span style="color: red;">Забронирован</span></p>
            <p><strong>Забронирован с:</strong> {{ current_booking.start_date|date:"d.m.Y" }}</p>
            <p><strong>Забронирован по:</strong> {{ current_booking.end_date|date:"d.m.Y" }}</p>
        {% else %}
            <p><strong>Статус:</strong> <span style="color: green;">Свободен</span></p>
            <hr>
            <form action="" method="post" style="margin-top: 20px;">
                {% csrf_token %}
                <h3>Забронировать номер</h3>
                {{ form.as_p }}
                <button type="submit">Забронировать</button>
            </form>
        {% endif %}
        {# --- КОНЕЦ ЕДИНСТВЕННОГО ПРАВИЛЬНОГО БЛОКА --- #}
    </div>

    <br>
    <a href="{% url 'hotel_numbers:room_list' room.hotel.slug room.category %}">← Назад к списку номеров</a>
{% endblock %}