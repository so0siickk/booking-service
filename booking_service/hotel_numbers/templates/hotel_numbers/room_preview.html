{% extends "base.html" %}

{% block title %}Номер {{ room.title }}{% endblock %}

{% block content %}
    <nav aria-label="breadcrumb">
        <ol>
            <li><a href="{% url 'hotel_numbers:hotel_list' %}">Отели</a></li>
            <li><a href="{% url 'hotel_numbers:hotel_detail' room.hotel.id %}">{{ room.hotel.title }}</a></li>
            <!-- Ссылку на категорию здесь сделать сложнее, если она не хранится в модели Room -->
            <li>{{ room.title }}</li>
        </ol>
    </nav>
    
    <h1>{{ room.title }}</h1>
    <h2>в отеле "{{ room.hotel.title }}"</h2>

    <div>
        <p><strong>Цена за ночь:</strong> {{ room.price }} руб.</p>
        <p><strong>Количество спальных мест:</strong> {{ room.sleep_places }}</p>
        <p><strong>Этаж:</strong> {{ room.floor }}</p>
        <p><strong>Статус:</strong> {{ room.get_status_display }}</p>

        {% if room.status == 0 %} {# BOOKED #}
            <p><strong>Забронирован с:</strong> {{ room.date_start_booked|date:"d.m.Y" }}</p>
            <p><strong>Забронирован по:</strong> {{ room.date_end_booked|date:"d.m.Y" }}</p>
        {% endif %}
    </div>

    <hr>

    {% if room.status == 1 %} {# AVAILABLE #}
        <form action="" method="post">
            {% csrf_token %}
            <h3>Забронировать номер</h3>
            <!-- Здесь могут быть поля для выбора дат -->
            <button type="submit">Забронировать</button>
        </form>
    {% else %}
        <p style="color: red;">Этот номер сейчас забронирован.</p>
    {% endif %}

    <br>
    <a href="#">← Назад к вариантам номеров</a>
{% endblock %}